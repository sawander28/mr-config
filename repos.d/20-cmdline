
#
# 20. cmdline
#

[$HOME/repos/cmdline/extrace]
checkout = git clone git@rpi3.lan:extrace.git
clean = rm -f /usr.home.local/bin/{extrace,pwait}
fixups = git_ensure_remote upstream git://git.vuxu.org/extrace
update = sudo make install clean && info "Installed $STOW_NAME"

[$HOME/repos/cmdline/xe]
checkout = git clone git@rpi3.lan:xe.git
fixups = git_ensure_remote upstream git://git.vuxu.org/xe
update = sudo make install clean && info "Installed $STOW_NAME"


[$HOME/repos/cmdline/logcatch]
checkout = git clone git@rpi3.lan:logcatch.git
fixups = git_ensure_remote upstream git://git.vuxu.org/logcatch
update = sudo make install clean && info "Installed $STOW_NAME"

[$HOME/repos/cmdline/direnv]
checkout = git clone git@rpi3.lan:direnv.git
update = sudo make install && info "Installed direnv"
fixups = git_ensure_remote upstream git@github.com/direnv/direnv.git

[$HOME/repos/cmdline/libarchive]
checkout = git clone git@rpi3.lan:libarchive.git
update =
  [ -f ./configure ] || autoreconf -fi
  ./configure \
    --prefix=/usr/local \
    --enable-static \
    --enable-shared \
    --enable-posix-regex-lib=libc \
    --enable-xattr \
    --enable-acl \
    --with-zstd \
    --with-lz4 \
    --with-openssl \
    --with-lzma \
    --without-nettle \
    --without-expat \
    --without-xml2
  make -j4
  sudo make install
fixups = git_ensure_remote upstream https://github.com/libarchive/libarchive.git

[$HOME/repos/cmdline/unix-tools]
checkout = git clone git@rpi3.lan:unix-tools.git
update = sudo make install

[$HOME/repos/cmdline/opendoas]
checkout = git clone git@rpi3.lan:opendoas.git
fixups = git_ensure_remote upstream git@github.com/Duncaen/OpenDoas.git
update =
  [ -f ./configure ] || autoreconf -fi
  ./configure --prefix=/usr/local \
    --enable-static \
    --with-timestamp
  make -j4
  sudo make install
  make clean

# vim: fenc=utf-8 ft=dosini ts=2 sts=2 sw=2 et
