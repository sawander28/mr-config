[DEFAULT]
include =
  cat /usr/local/lib/mr/stow
  for f in ~/repos/wandsas/mr-config/sh.d/*.sh; do
    echo "# INCLUDED FROM: $f"
    cat "$f"
    echo # Needed in case file isn't terminated with a newline
  done
  
lib =
  . ~/lib/mr


[$HOME/repos/vcs/myrepos]
order = 1
checkout = git clone git@rpi3.lan:myrepos.git
post_checkout =
  git_ensure_remote upstream git://myrepos.branchable.com/myrepos
  cd $MR_REPO
  sudo make install

# xbps-install perl-Test-Output texinfo
[$HOME/repos/vcs/stow]
order = 2
checkout = git clone git@rpi3.lan:stow.git
post_checkout =
  git_ensure_remote upstream git://git.savannah.gnu.org/stow.git
  cd $MR_REPO
  autoreconf -fi
  ./configure --prefix=/usr/local
  make -j4
  sudo make install

[$HOME/repos/wandsas/mr-config]
name = mr-config
order = 3
checkout = git clone git@rpi3.lan:wandsas/mr-config.git $MR_REPO
# This load repos/wandsas/mr-config/.mrconfig
chain = false
post_checkout =
  git_ensure_remote upstream git@gitlab.com:sawander/mr-config.git
  ln -sf "$MR_REPO/home-mrconfig" ~/.mrconfig
  ln -sf "$MR_REPO/.stow-global-ignore" ~

[$HOME/repos/vcs/pass]
name = pass
checkout = git clone git@rpi3.lan:pass.git
post_checkout =
  git_ensure_remote upstream https://git.zx2c4.com/password-store
  cd $MR_REPO
  sudo make PREFIX=/usr/local install

[$HOME/repos/wandsas/shell-env]
checkout = git clone git@rpi3.lan:shell-env.git
fixups = 
  git_ensure_remote github git@github.com:sawander28/shell-env.git
  git_ensure_remote gitlab git@gitlab.com:sawander/shell-env.git
stowable = true

[$HOME/repos/wandsas/mail-config]
checkout = git clone git@rpi3.lan:mail-config.git
fixups =
  git_ensure_remote github git@github.com:sawander28/mail-config.git
  git_ensure_remote gitlab git@gitlab.com:sawander/mail-config.git
stowable = true
fixups = checkprivs
skip = ! myworkstation

[$HOME/repos/wandsas/sway-desktop]
checkout = git clone git@rpi3.lan:sway-desktop.git
fixups =
  git_ensure_remote github git@github.com:sawander28/sway-desktop.git
  git_ensure_remote gitlab git@gitlab.com:sawander/sway-desktop.git
stowable = true

[~/repos/wandsas/xorg-desktop]
checkout = git clone git@rpi3.lan:xorg-desktop.git
fixups =
  git_ensure_remote github git@github.com:swander28/xorg-desktop.git
  git_ensure_remote gitlab git@gitlab.com:swander/xorg-desktop.git
stowable = true

[$HOME/repos/wandsas/git-config]
checkout = git clone git@rpi3.lan:git-config.git
fixups =
  git_ensure_remote gitlab git@github.com:sawander28/git-config.git
  git_ensure_remote gitlab git@gitlab.com:sawander/git-config.git
stowable = true

[$HOME/repos/wandsas/vim-config]
checkout = git clone git@rpi3.lan:vim-config.git
fixups =
  git_ensure_remote github git@github.com:sawander28/vim-config.git
  git_ensure_remote gitlab git@gitlab.com:sawander/vim-config.git
stowable = true

[$HOME/.ssh]
checkout = git clone git@rpi3.lan:ssh-config.git $MR_REPO
fixups = checkprivs
skip = ! myworkstation

[$HOME/.gnupg]
checkout = git clone git@rpi3.lan:gnupg-config.git $MR_REPO
fixups = checkprivs
skip = ! myworkstation

[$HOME/.password-store]
checkout = git clone git@rpi3.lan:password-store.git $MR_REPO
fixups = checkprivs
skip = ! myworkstation

# vim: fenc=utf-8 ft=dosini ts=2 sts=2 sw=2 et
